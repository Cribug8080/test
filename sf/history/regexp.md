

[一个校验规则](https://segmentfault.com/q/1010000019285213?_ea=11767878)

### 有这样一个校验规则，数字个数可以是3，5，7，10，20这个可以定义为变量

3个，5个，7个，可以输入的范围是0-9。10个 可以输入的范围是1-10；20个 可以输入的范围是1-99；且每个数字之间用英文逗号隔开。

例如: 3个时:
```
1,1,1  正确 可以重复   
3,4,9  正确 
3,4,9, 正确
,3,4,9 正确 
6,1,16 范围错误 如果个数为20就正确
2,4,,5 格式错误 两个逗号不能连用
2,4,a 格式错误 不能为字母
```

```javascript
function getReg(rangeType, num) {
 const rangeMap = {
  '0-9': '\\d',
  '1-10': '(?:[1-9]|10)',
  '1-99': '(?:[1-9]\\d?)'
 };
 const range = rangeMap[rangeType];
 return new RegExp('^,?(?:'+ range +',){'+ (num - 1) +'}'+ range +'{1},?$');
}

getReg('0-9', 3) // /^,?(?:\d,){2}\d{1},?$/

getReg('1-10', 10) // /^,?(?:(?:[1-9]|10),){9}(?:[1-9]|10){1},?$/

getReg('1-99', 20) // /^,?(?:(?:[1-9]\d?),){19}(?:[1-9]\d?){1},?$/

```

**总结**：判断数量、判断数据范围。去除`$1`引用。

